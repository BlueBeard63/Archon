# Phase 6.3 Plan 1: Focused Field Visual Indicator

## Objective

Add clear visual indication of the currently focused field in all form screens using color highlighting for the focused label. The arrow prefix (`>`) already exists; this plan adds color styling to make the focus state more visually distinct.

## Execution Context

```
@archon/internal/ui/styles.go
@archon/internal/ui/screens/sites.go
@archon/internal/ui/screens/nodes.go
@archon/internal/ui/screens/domains.go
@archon/internal/ui/components/form.go
```

## Context

### Current State
- Arrow prefix (`"> "` for focused, `"  "` for unfocused) is already implemented in all form screens
- `FormLabelStyle` exists in styles.go (muted gray, bold)
- `FormInputFocusedStyle` exists but only styles the input border, not the label
- No focused label color styling exists

### What This Plan Adds
- `FormLabelFocusedStyle` with ColorPrimary (purple) foreground + bold
- Apply this style to focused field labels across all form screens
- Consistent visual feedback showing which field is active

### Form Screens to Update
1. Site Create (`RenderSiteCreateWithZones`) - lines 319-404 in sites.go
2. Site Edit (`RenderSiteEditWithZones`) - lines 587-617 in sites.go
3. Site ENV Vars (`renderEnvVarsSection`) - lines 669-738 in sites.go
4. Domain Mappings (`renderDomainMappingsSection`) - lines 741-829 in sites.go
5. Node Create (`RenderNodeCreateWithZones`) - lines 273-341 in nodes.go
6. Node Edit (`RenderNodeEditWithZones`) - lines 349-420 in nodes.go
7. Node Config Save (`RenderNodeConfigSaveWithZones`) - lines 494-556 in nodes.go
8. Domain Create (`RenderDomainCreateWithZones`) - lines 162-278 in domains.go
9. Domain Edit (`RenderDomainEditWithZones`) - lines 314-457 in domains.go

## Tasks

### Task 1: Add FormLabelFocusedStyle to styles.go
Add a new style for focused labels using ColorPrimary (purple):

```go
// FormLabelFocusedStyle is the style for focused form field labels
FormLabelFocusedStyle = lipgloss.NewStyle().
    Foreground(ColorPrimary).
    Bold(true)
```

**Files:** `archon/internal/ui/styles.go`

### Task 2: Create helper function for label rendering
Add a helper function in sites.go (or a shared location) to render labels with focus state:

```go
// renderFieldLabel renders a field label with focus indicator
func renderFieldLabel(label string, focused bool) string {
    if focused {
        return ui.FormLabelFocusedStyle.Render("> " + label)
    }
    return "  " + label
}
```

**Files:** `archon/internal/ui/screens/sites.go`

### Task 3: Update Site Create form
Update `RenderSiteCreateWithZones` to use styled labels for focused fields.

**Files:** `archon/internal/ui/screens/sites.go`

### Task 4: Update Site Edit form
Update `RenderSiteEditWithZones` to use styled labels for focused fields.

**Files:** `archon/internal/ui/screens/sites.go`

### Task 5: Update ENV vars section
Update `renderEnvVarsSection` to use styled labels for focused pairs.

**Files:** `archon/internal/ui/screens/sites.go`

### Task 6: Update Domain Mappings section
Update `renderDomainMappingsSection` to use styled labels for focused mappings.

**Files:** `archon/internal/ui/screens/sites.go`

### Task 7: Update Node forms
Update `RenderNodeCreateWithZones`, `RenderNodeEditWithZones`, and `RenderNodeConfigSaveWithZones` to use styled labels.

**Files:** `archon/internal/ui/screens/nodes.go`

### Task 8: Update Domain forms
Update `RenderDomainCreateWithZones` and `RenderDomainEditWithZones` to use styled labels.

**Files:** `archon/internal/ui/screens/domains.go`

### Task 9: Verify and test
Build the project and manually verify the focused field highlighting works correctly on all form screens.

**Commands:**
```bash
cd /home/bluebeard/Source/Archon && go build ./...
```

## Verification

Run the build to ensure no compilation errors:
```bash
cd /home/bluebeard/Source/Archon && go build ./...
```

Manual testing checklist:
- [ ] Site Create: Focused field label shows purple color with ">" prefix
- [ ] Site Edit: Same behavior
- [ ] Site ENV Vars: Focused pair shows purple highlighting
- [ ] Domain Mappings: Focused mapping shows purple highlighting
- [ ] Node Create: Focused field label shows purple color with ">" prefix
- [ ] Node Edit: Same behavior
- [ ] Node Config Save: Same behavior
- [ ] Domain Create: Focused field label shows purple color with ">" prefix
- [ ] Domain Edit: Same behavior
- [ ] Tab navigation: Color moves with focus correctly
- [ ] Mouse click: Color updates when clicking different fields

## Success Criteria

- [x] `FormLabelFocusedStyle` added to styles.go
- [ ] All form screens use color highlighting for focused fields
- [ ] Arrow prefix (`>`) preserved for focused fields
- [ ] Consistent styling across all form types (text inputs, dropdowns, ENV pairs, domain mappings)
- [ ] Build passes with no errors

## Output

- Modified files:
  - `archon/internal/ui/styles.go` - New focused label style
  - `archon/internal/ui/screens/sites.go` - Site forms + helper function
  - `archon/internal/ui/screens/nodes.go` - Node forms
  - `archon/internal/ui/screens/domains.go` - Domain forms
